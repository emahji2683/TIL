# DPテーブルとは
過去の計算結果を保存するテーブルのこと。この過去の計算結果は部分的な状態に対して、最適な答えを見つけて入れる、また、そうでない答えに関しては更新する。

# ナップサック問題とは
ナップサックの容量を越えない前提で、中身の価値を最大にする組み合わせを見つける。

> ナップサック問題は，ナップサックの中にいくつかの品物を詰め込み入れた品物の総価値を最大にするという問題です．ただし，ナップサックと品物にはそれぞれ容量やサイズが与えられていて，入れた品物のサイズの総和がナップサックの容量を超えてはいけないという条件があります．

# コード
## 実際のコード
```
# アイテムの個数
n = 4
# ナップサックの容量
W = 8

# それぞれのアイテムの重さ
weights = [2, 3, 4, 5]
# それぞれのアイテムの価値
values = [3, 4, 5, 6]

# DPテーブルを初期化（n+1 行, W+1 列）
dp = Array.new(n + 1) { Array.new(W + 1, 0) }

# DP更新
(1..n).each do |i|
  (0..W).each do |w|
    if weights[i - 1] > w
      dp[i][w] = dp[i - 1][w]
    else
      dp[i][w] = [dp[i - 1][w], dp[i - 1][w - weights[i - 1]] + values[i - 1]].max
    end
  end
end

# 結果出力：最大価値
puts "最大の価値は: #{dp[n][W]}"
```


## 部分の解説
i: 各アイテムの番号
1..n: アイテム番号(1番目~n番目)
w: リュックの容量を満たす、全てのパターン
if weights[i - 1] > w: i番目のアイテムの容量が任意の容量より大きいが場合。 

### ``dp[i][w] = dp[i - 1][w]``
``dp[i - 1][w]``: i番目のアイテムを使わなかったときの、重さwでの最大価値
``dp[i - 1][w]``: i - 1番目のアイテムを使わなかったときの、重さwでの最大価値

「i番目のアイテムを使わなかったときの、重さwでの最大価値は、i-1番目まででの最大価値と同じ」


``dp[i][w] = i個目までのアイテムで、重さw以下のときに得られる**最大の価値**``

```
(1..n).each do |i|
  (0..W).each do |w|
    if weights[i - 1] > w
      dp[i][w] = dp[i - 1][w]
    else
      dp[i][w] = [dp[i - 1][w], dp[i - 1][w - weights[i - 1]] + values[i - 1]].max
    end
  end
end
```
