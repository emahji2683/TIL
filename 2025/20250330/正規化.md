# 正規化とは
> データベース設計において、正規化はデータの冗長性を排除し、データの一貫性と整合性を保つための重要なプロセスです。正規化を適切に行うことで、データの重複や不整合を防ぎ、効率的なデータ操作が可能になります。

## 第一正規化
第1正規形（1NF）の例

条件:
- 各フィールドが単一の値を持つ
- 繰り返しや複数の値を含まない

違反している例
| ID | 氏名 | 電話番号                     |
|----|------|------------------------------|
| 1  | 田中 | 090-1234-5678, 080-9876-5432 |
| 2  | 鈴木 | 070-5555-6666                |

## 第二正規化
**条件:**  
- 1NFを満たしている  
- 主キーの一部にのみ依存する（部分関数従属）非キー属性がない  

#### **2NFに違反している例**
| 学生ID | 科目ID | 科目名 | 単位数 |
|--------|--------|--------|--------|
| 1      | 101    | 数学   | 2      |
| 1      | 102    | 物理   | 3      |
| 2      | 101    | 数学   | 2      |

ここで、科目名(列3)と単位数(列4)は科目ID(列2)のみに依存しており、学生IDとは関係がありません。  
主キーの一部にのみ依存する非キー属性がないという条件に対して、科目名、単位数が科目名のみ(1部のキーのみ)に依存しているため、2NF(第二正規形)に違反している。

#### **2NFに正規化**
**「科目」テーブルを分割する**
##### **履修テーブル**
| 学生ID | 科目ID |
|--------|--------|
| 1      | 101    |
| 1      | 102    |
| 2      | 101    |

##### **科目テーブル**
| 科目ID | 科目名 | 単位数 |
|--------|--------|--------|
| 101    | 数学   | 2      |
| 102    | 物理   | 3      |

→ こうすることで、**「科目名」と「単位数」は科目IDに完全に依存するようになり、部分関数従属が解消されました。**

---

### **第3正規形（3NF）の例**
**条件:**  
- 2NFを満たしている  
- **非キー属性が、他の非キー属性に依存しない**（推移的関数従属の排除）  

#### **3NFに違反している例**
| 学生ID | 学生名 | 郵便番号 | 住所           |
|--------|--------|----------|----------------|
| 1      | 田中   | 100-0001 | 東京都千代田区 |
| 2      | 鈴木   | 530-0001 | 大阪府大阪市   |

**非キー属性が、他の非キー属性に依存しない**（推移的関数従属の排除）  
非キー属性(郵便番号)が他の非キー属性(住所)に依存している。
このため、3NF(第3正規形)に違反している。

#### **3NFに正規化**
##### **学生テーブル**
| 学生ID | 学生名 | 郵便番号 |
|--------|--------|----------|
| 1      | 田中   | 100-0001 |
| 2      | 鈴木   | 530-0001 |

##### **郵便番号テーブル**
| 郵便番号 | 住所           |
|----------|----------------|
| 100-0001 | 東京都千代田区 |
| 530-0001 | 大阪府大阪市   |

→ こうすることで、非キー属性同士の依存関係を排除し、3NFを満たすようになりました。

---

### **まとめ**
| 正規形  | 必要な条件                             | 例                         |
|---------|----------------------------------------|----------------------------|
| **1NF** | 各フィールドに単一の値                 | 電話番号を別の行に分割     |
| **2NF** | 非キー属性が主キー全体に完全依存       | 科目情報を別テーブルに分離 |
| **3NF** | 非キー属性が他の非キー属性に依存しない | 郵便番号と住所を分離       |

