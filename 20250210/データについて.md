# 現状の対応状況
- 各美術館のデータについては、一定程度網羅的に収集した。
- 現状のデータを一旦データベースに投入しても良いか。
- その際にどのキーを関連づけることによって、関連データを投入するか。
- エリアに関しては、都道府県の表記について整合が取れていないと思うので、修正する。

| 投入データ        | モデル       | 後から投入可能か |
|-------------------|--------------|------------------|
| 美術館データ_主要 | museum       | 可能             |
| 緯度経度          | museum       | 可能             |
| 入館料            | AdmissionFee | 可能             |
| 外観写真          | museum       | 可能             |
| エリア            | museum       | 可能             |

# データの収集方針
## Museumモデル
未収集のwebsite_urli, phone_numberについては、wikipediaAPIから収集することを検討する。

| 内容           | 収集方法                                               | 概要                                      |
|----------------|--------------------------------------------------------|-------------------------------------------|
| id             | <span style="background-color: gley">自動生成</span>   | -                                         |
| name           | <span style="color: blue">WEBサイト</span>             | nokogiriを用いて収集している              |
| location       | <span style="color: blue">WEBサイト</span>             | nokogiriを用いて収集している              |
| created_at     | 自動生成                                               | -                                         |
| updated_at     | 自動生成                                               | -                                         |
| business_hours | <span style="color: blue">WEBサイト</span>             | nokogiriを用いて収集している
| admission_fees | <span style="color: blue">WEBサイト</span>             | nokogiriを用いて収集している              |
| website_url    | <span class="red">未収集                                                 |                                           |
| phone_number   | <span class="red">未収集                                                 |                                           |
| latitude       | <span style="color: green">geo API</span>              | 住所データからgeo APIを用いて算出している |
| longitude      | <span style="color: green">geo API</span>              |  住所データからgeo APIを用いて算出している                                         |
| photo_url      | <span style="background-color: yellow">wiki API</span> |                                           |
| prefecture_id  | 自動生成                                               |                                           |
### 基本的なデータ群
#### 元データの収集方針
対象とするサイトは×✖︎。まず検索から一覧を算出する。この上で、二種類のスクリプトを動作させることでデータを収集している。第一段階としては、美術館一覧ページから個別の絵ページのURLを収集するスクリプトを使用している。また、この個別ページの中から詳細データを抽出するスクリプトを使用することで。データの抽出としている。

#### 元データの修正
- website_URLの削除
- areaの修正
- chatGPTによる修正

#### データの投入
### website_url, photo_url
#### データの使用目的
各美術館カードに外観写真、公式ページへのリンクを表示するために使用している。

#### 収集方法
wikipediaAPIによる収集を行う。

#### 具体の方法
WEBサイトで収集したそれぞれの美術館データのうちタイトルで検索をかけその上で、写真のURLに該当する部分を抽出している。写真のURLを収集後、CSVに保存しデータベースに投入している。

### 緯度経度(latitude, longitude)
#### データの使用目的
美術館の所在地を地図上に表示するために使用している。

#### 収集方針
GeolocationAPIを用いて収集している。Rails側で動作させている。

#### 具体の方法
GeolocationAPIに住所データを投入し、Rails内で動作する〇〇で緯度経度に変換している。緯度・経度に変換したデータはデータベースに投入している。


## Cafeモデル
## AdmissionFeeモデル
### 作成方法
- Museumモデルで取得しているデータから、chatGPTを用いて作成
- スプレッドシート等で不足データを保管。

### 気になる点
- chatGPTのプロンプトが身検討。

# 個別ファイルの解説
<span class=red>このファイルは何？
| ファイル名                                                | 概要                                   |
|-----------------------------------------------------------|----------------------------------------|
| <span class="blue">museum_each_page.csv            | 個別美術館情報                         |
| <span class="red">museum_each_page.rb</span>       | 個別美術館ページから詳細情報を取得する |
| <span class="blue">museum_each_page_edited.csv     | 個別美術館情報(整形後)                 |
| <span class="blue">museum_info.csv                 | 美術館URL一覧                          |
| <span class="gray-text">museum_urlV01_homemate.rb</span> | <span class="gray-text">過去ファイル                                       |
| <span class="red">museum_urlV02_homemate.rb</span> | 個別美術館ページのURLを抽出            |
| <span class="red">skraping_photourl_from_wiki.rb   | 美術館の写真一覧URLを取得              |
| <span class="yellow">wiki_photos.csv                 | 美術館の写真URL一覧                                       |

# 参考資料
-  [シンボリックリンクの作成と削除 #Linux - Qiita](https://qiita.com/colorrabbit/items/2e99304bd92201261c60)
- [「シンボリックリンク」と「ハードリンク」の違い｜「分かりそう」で「分からない」でも「分かった」気になれるIT用語辞典](https://wa3.i-3-i.info/diff640link.html)

